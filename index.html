<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Portal</title>
    
    <link rel="manifest" href='data:application/manifest+json,{"name":"Employee Portal","short_name":"Portal","start_url":"/Transport-Food/","display":"standalone","background_color":"#0a0e1a","theme_color":"#3300cc","icons":[{"src":"https://cdn-icons-png.flaticon.com/512/1827/1827347.png","sizes":"512x512","type":"image/png"}]}'>

    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: #0a0e1a; }
        iframe { border: none; width: 100%; height: 100%; }
    </style>
</head>
<body>
    
    <iframe src="https://script.google.com/macros/s/AKfycbwpaXjVKwhuJ0YcpoT5531CvxfevHrPcHqUlKuwwkMOZsTj1-zVlljdeYZ1r2SuURky/exec"></iframe>

    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log("Install prompt captured");

            setTimeout(() => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        deferredPrompt = null;
                    });
                }
            }, 5000); // 5 സെക്കന്റ് കാത്തിരിക്കുന്നു
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Inline Service Worker
                const swCode = "self.addEventListener('install', e => self.skipWaiting()); self.addEventListener('activate', e => e.waitUntil(clients.claim())); self.addEventListener('fetch', e => e);";
                const blob = new Blob([swCode], {type: 'text/javascript'});
                const url = URL.createObjectURL(blob);
                navigator.serviceWorker.register(url);
            });
        }
    </script>
</body>
</html>
